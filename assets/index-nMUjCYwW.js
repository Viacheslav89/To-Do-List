(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();function b(e){return{_todos:e,get todos(){return this._todos},set todos(t){this._todos=t,l()}}}function v(e){return new Proxy(e,{get(t,o){return t[o]},set(t,o,d){return t[o]=d,l(),!0}})}function g(e){let t=e;return[function(){return t},function(d){t=d,l()}]}function i(e,t){localStorage.setItem(e,JSON.stringify(t))}let f=Number(localStorage.getItem("counter"))||1;function L(e,t){r.todos.forEach(o=>{o.id===e.id&&(o.text=t.value,i("items",r.todos))}),m(null)}function T(e){r.todos.forEach(t=>{e.id===t.id&&(t.active=!e.active)}),r.todos=[...r.todos],i("items",r.todos)}function y(){if(!a.value)return;const e=k(a.value);a.value="",i("counter",++f),r.todos.push(e),r.todos=[...r.todos],i("items",r.todos)}function S(e){r.todos=r.todos.filter(t=>t.id!==e.id),i("items",r.todos)}function h(e){m(e.id)}function k(e){return{text:e,active:!0,id:Number(localStorage.getItem("counter"))||f}}const a=document.querySelector(".input"),E=document.querySelector(".add-button"),x=document.querySelector(".clear-button"),u=document.querySelector(".todo-list"),_=localStorage.getItem("items")||"[]",r=b(JSON.parse(_)),p=v({statusFilter:"all"});let[I,m]=g(0);function O(e){const t=document.createElement("div");t.classList.add("content__wrapper");const o=document.createElement("div");o.classList.add("btn-wrapper");const d=document.createElement("input");d.classList.add("todo-list-item__input"),t.append(d),e.active||d.classList.add("text-completed"),d.value=e.text,setTimeout(()=>{d.focus()},0);const n=document.createElement("button");n.classList.add("button","btn-cancel"),n.append("off"),o.prepend(n);const c=document.createElement("button");return c.classList.add("button","btn-ok"),c.append("ok"),o.prepend(c),t.append(o),c.addEventListener("click",()=>L(e,d)),n.addEventListener("click",()=>{m(null)}),d.addEventListener("keypress",s=>{s.key==="Enter"&&c.click()}),t}function F(e){const t=document.createElement("div");t.classList.add("btn-wrapper");const o=document.createElement("button");o.classList.add("button","btn-completed"),o.append("V"),o.addEventListener("click",()=>T(e));const d=document.createElement("button");d.classList.add("button","btn-del"),d.append("X"),d.addEventListener("click",()=>S(e));const n=document.createElement("button");return n.classList.add("button","btn-edit"),n.append(".."),n.addEventListener("click",()=>h(e)),t.append(o),t.append(d),t.append(n),t}function N(e){const t=document.createElement("p");t.classList.add("todo-list__text"),t.append(e.text),e.active||t.classList.add("text-completed");const o=F(e);return{todoTextEl:t,btnWrapper:o}}function P(e){const t=e.id===I(),o=document.createElement("li");if(o.classList.add("todo-list__item"),t){const d=O(e);o.append(d)}else{const d=N(e);o.append(d.todoTextEl),o.append(d.btnWrapper)}return o}a.addEventListener("keypress",e=>{e.key==="Enter"&&E.click()});E.addEventListener("click",y);function l(){u.innerHTML="";let e=r.todos;p.statusFilter==="active"&&(e=r.todos.filter(t=>t.active)),p.statusFilter==="completed"&&(e=r.todos.filter(t=>!t.active)),e.forEach(t=>u.append(P(t)))}const q=document.getElementsByName("radio");q.forEach(e=>e.addEventListener("click",t=>{const o=t.target;p.statusFilter=o.value}));x.addEventListener("click",()=>{u.innerHTML="",r.todos.length=0,localStorage.clear()});l();
