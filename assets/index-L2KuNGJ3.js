(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();function b(t){return{_todos:t,get todos(){return this._todos},set todos(e){this._todos=e,m()}}}const v=t=>new Proxy(t,{get(o,c){return o[c]},set(o,c,n){return o[c]=n,!0}});function L(t){let e=t;return[function(){return e},function(o){e=o,m()}]}function i(t,e){localStorage.setItem(t,JSON.stringify(e))}let f=Number(localStorage.getItem("counter"))||1;function g(t,e){d.todos.forEach(o=>{o.id===t.id&&(o.text=e.value,i("items",d.todos))}),p(null)}function T(t){d.todos.forEach(e=>{t.id===e.id&&(e.active=!t.active)}),d.todos=[...d.todos],i("items",d.todos)}function y(){if(!a.value)return;const t=x(a.value);a.value="",i("counter",++f),d.todos.push(t),d.todos=[...d.todos],i("items",d.todos)}function S(t){d.todos=d.todos.filter(e=>e.id!==t.id),i("items",d.todos)}function h(t){p(t.id)}function x(t){return{text:t,active:!0,id:f}}const a=document.querySelector(".input"),E=document.querySelector(".add-button"),k=document.querySelector(".clear-button"),l=document.querySelector(".todo-list"),_=localStorage.getItem("items")||"[]",d=b(JSON.parse(_)),u=v({statusFilter:"all"});let[O,p]=L(0);function F(t){const e=document.createElement("div");e.classList.add("content__wrapper");const o=document.createElement("div");o.classList.add("btn-wrapper");const c=document.createElement("input");c.classList.add("todo-list-item__input"),e.append(c),t.active||c.classList.add("text-completed"),c.value=t.text,setTimeout(()=>{c.focus()},0);const n=document.createElement("button");n.classList.add("button","btn-cancel"),n.append("off"),o.prepend(n);const r=document.createElement("button");return r.classList.add("button","btn-ok"),r.append("ok"),o.prepend(r),e.append(o),r.addEventListener("click",()=>g(t,c)),n.addEventListener("click",()=>{p(null)}),c.addEventListener("keypress",s=>{s.key==="Enter"&&r.click()}),e}function I(t){const e=document.createElement("div");e.classList.add("btn-wrapper");const o=document.createElement("button");o.classList.add("button","btn-completed"),o.append("V"),o.addEventListener("click",()=>T(t));const c=document.createElement("button");c.classList.add("button","btn-del"),c.append("X"),c.addEventListener("click",()=>S(t));const n=document.createElement("button");return n.classList.add("button","btn-edit"),n.append(".."),n.addEventListener("click",()=>h(t)),e.append(o),e.append(c),e.append(n),e}function N(t){const e=document.createElement("p");e.classList.add("todo-list__text"),e.append(t.text),t.active||e.classList.add("text-completed");const o=I(t);return{todoTextEl:e,btnWrapper:o}}function P(t){const e=t.id===O(),o=document.createElement("li");if(o.classList.add("todo-list__item"),e){const c=F(t);o.append(c)}else{const c=N(t);o.append(c.todoTextEl),o.append(c.btnWrapper)}return o}a.addEventListener("keypress",t=>{t.key==="Enter"&&E.click()});E.addEventListener("click",y);function m(){l.innerHTML="";let t=d.todos;u.statusFilter==="active"&&(t=d.todos.filter(e=>e.active)),u.statusFilter==="completed"&&(t=d.todos.filter(e=>!e.active)),t.forEach(e=>l.append(P(e)))}const q=document.getElementsByName("radio");q.forEach(t=>t.addEventListener("click",e=>{const o=e.target;u.statusFilter=o.value}));k.addEventListener("click",()=>{l.innerHTML="",d.todos.length=0,localStorage.clear()});m();
